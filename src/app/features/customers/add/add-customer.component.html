<div class="add-customer">
  <!-- Header -->
  <div class="page-header">
    <a routerLink="/app/customers" class="back-link">
      <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <line x1="19" y1="12" x2="5" y2="12"/>
        <polyline points="12 19 5 12 12 5"/>
      </svg>
      Back to Customers
    </a>
    <h1>Add New Customer</h1>
    <p class="subtitle">Enter the customer's information below</p>
  </div>

  <!-- Error Message -->
  @if (error()) {
    <div class="error-message">
      <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <circle cx="12" cy="12" r="10"/>
        <line x1="12" y1="8" x2="12" y2="12"/>
        <line x1="12" y1="16" x2="12.01" y2="16"/>
      </svg>
      <span>{{ error() }}</span>
    </div>
  }

  <!-- Form Card -->
  <div class="form-card">
    <form (ngSubmit)="submitForm()" [class.shake]="formSubmitAttempted() && !isFormValid()">
      <div class="form-section">
        <h3>
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"/>
            <circle cx="12" cy="7" r="4"/>
          </svg>
          Basic Information
        </h3>
        
        <div class="form-grid">
          <div class="form-group full-width" [class.has-error]="showNameError()">
            <label for="name">
              Full Name
              <span class="required-indicator">*</span>
            </label>
            <div class="input-wrapper" [class.has-error]="showNameError()">
              <input 
                type="text" 
                id="name" 
                class="form-control"
                [class.input-error]="showNameError()"
                [class.input-success]="nameTouched() && nameValidation().valid && name()"
                [ngModel]="name()"
                (ngModelChange)="name.set($event)"
                (blur)="onNameBlur()"
                name="name"
                placeholder="Enter customer's full name"
              />
              @if (nameTouched() && name()) {
                <span class="status-icon" [class.success]="nameValidation().valid" [class.error]="!nameValidation().valid">
                  @if (nameValidation().valid) {
                    <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                      <polyline points="20 6 9 17 4 12"/>
                    </svg>
                  } @else {
                    <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                      <circle cx="12" cy="12" r="10"/>
                      <line x1="12" y1="8" x2="12" y2="12"/>
                      <line x1="12" y1="16" x2="12.01" y2="16"/>
                    </svg>
                  }
                </span>
              }
            </div>
            @if (showNameError()) {
              <div class="field-error">
                <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <circle cx="12" cy="12" r="10"/>
                  <line x1="12" y1="8" x2="12" y2="12"/>
                  <line x1="12" y1="16" x2="12.01" y2="16"/>
                </svg>
                <span>{{ nameValidation().message }}</span>
              </div>
            }
          </div>

          <div class="form-group" [class.has-error]="showEmailError()">
            <label for="email">
              Email Address
              <span class="required-indicator">*</span>
            </label>
            <div class="input-wrapper" [class.has-error]="showEmailError()">
              <input 
                type="email" 
                id="email" 
                class="form-control"
                [class.input-error]="showEmailError()"
                [class.input-success]="emailTouched() && emailValidation().valid && email()"
                [ngModel]="email()"
                (ngModelChange)="email.set($event)"
                (blur)="onEmailBlur()"
                name="email"
                placeholder="customer@example.com"
              />
              @if (emailTouched() && email()) {
                <span class="status-icon" [class.success]="emailValidation().valid" [class.error]="!emailValidation().valid">
                  @if (emailValidation().valid) {
                    <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                      <polyline points="20 6 9 17 4 12"/>
                    </svg>
                  } @else {
                    <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                      <circle cx="12" cy="12" r="10"/>
                      <line x1="12" y1="8" x2="12" y2="12"/>
                      <line x1="12" y1="16" x2="12.01" y2="16"/>
                    </svg>
                  }
                </span>
              }
            </div>
            @if (showEmailError()) {
              <div class="field-error">
                <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <circle cx="12" cy="12" r="10"/>
                  <line x1="12" y1="8" x2="12" y2="12"/>
                  <line x1="12" y1="16" x2="12.01" y2="16"/>
                </svg>
                <span>{{ emailValidation().message }}</span>
              </div>
            }
          </div>

          <div class="form-group" [class.has-error]="showPhoneError()">
            <label for="phone">Phone Number</label>
            <div class="input-wrapper" [class.has-error]="showPhoneError()">
              <input 
                type="tel" 
                id="phone" 
                class="form-control"
                [class.input-error]="showPhoneError()"
                [class.input-success]="phoneTouched() && phoneValidation().valid && phone()"
                [ngModel]="phone()"
                (ngModelChange)="phone.set($event)"
                (blur)="onPhoneBlur()"
                name="phone"
                placeholder="+1 (555) 000-0000"
              />
              @if (phoneTouched() && phone()) {
                <span class="status-icon" [class.success]="phoneValidation().valid" [class.error]="!phoneValidation().valid">
                  @if (phoneValidation().valid) {
                    <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                      <polyline points="20 6 9 17 4 12"/>
                    </svg>
                  } @else {
                    <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                      <circle cx="12" cy="12" r="10"/>
                      <line x1="12" y1="8" x2="12" y2="12"/>
                      <line x1="12" y1="16" x2="12.01" y2="16"/>
                    </svg>
                  }
                </span>
              }
            </div>
            @if (showPhoneError()) {
              <div class="field-error">
                <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <circle cx="12" cy="12" r="10"/>
                  <line x1="12" y1="8" x2="12" y2="12"/>
                  <line x1="12" y1="16" x2="12.01" y2="16"/>
                </svg>
                <span>{{ phoneValidation().message }}</span>
              </div>
            } @else {
              <span class="form-hint">Optional</span>
            }
          </div>
        </div>
      </div>

      <div class="form-section">
        <h3>
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"/>
            <circle cx="12" cy="10" r="3"/>
          </svg>
          Address Information
        </h3>
        
        <div class="form-grid">
          <div class="form-group full-width">
            <label for="address">Street Address</label>
            <input 
              type="text" 
              id="address" 
              [ngModel]="address()"
              (ngModelChange)="address.set($event)"
              name="address"
              placeholder="123 Main Street"
              class="form-control"
            />
            <span class="form-hint">Optional</span>
          </div>

          <div class="form-group">
            <label for="city">City</label>
            <input 
              type="text" 
              id="city" 
              [ngModel]="city()"
              (ngModelChange)="city.set($event)"
              name="city"
              placeholder="New York"
              class="form-control"
            />
          </div>

          <div class="form-group">
            <label for="country">Country</label>
            <input 
              type="text" 
              id="country" 
              [ngModel]="country()"
              (ngModelChange)="country.set($event)"
              name="country"
              placeholder="United States"
              class="form-control"
            />
          </div>
        </div>
      </div>

      <div class="form-section">
        <h3>
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"/>
            <polyline points="14 2 14 8 20 8"/>
            <line x1="16" y1="13" x2="8" y2="13"/>
            <line x1="16" y1="17" x2="8" y2="17"/>
            <polyline points="10 9 9 9 8 9"/>
          </svg>
          Additional Notes
        </h3>
        
        <div class="form-group">
          <label for="notes">Notes</label>
          <textarea 
            id="notes" 
            [ngModel]="notes()"
            (ngModelChange)="notes.set($event)"
            name="notes"
            placeholder="Any additional information about this customer..."
            class="form-control"
            rows="4"
          ></textarea>
          <span class="form-hint">Optional - Add any relevant notes about this customer</span>
        </div>
      </div>

      <!-- Form Actions -->
      <div class="form-actions">
        <button type="button" class="btn-secondary" (click)="cancel()">
          Cancel
        </button>
        <button 
          type="submit" 
          class="btn-primary"
          [disabled]="isSubmitting()"
          [class.btn-loading]="isSubmitting()"
        >
          @if (isSubmitting()) {
            <span class="spinner"></span>
            Adding...
          } @else {
            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M16 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"/>
              <circle cx="8.5" cy="7" r="4"/>
              <line x1="20" y1="8" x2="20" y2="14"/>
              <line x1="23" y1="11" x2="17" y2="11"/>
            </svg>
            Add Customer
          }
        </button>
      </div>
    </form>
  </div>
</div>
